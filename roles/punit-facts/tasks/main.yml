---
# tasks file for punit-facts
- name: Gathering facts of host {{ ansible_hostname }}
  setup:
    gather_subset: all
  register: g_fact

- name: Creating facts files to /files directory.
  file:
    dest: /home/pgrewal/Project-Ansible//files/{{ ansible_hostname }}.json
    state: absent
  delegate_to: localhost

- name: Creating facts files to /files directory.
  lineinfile:
    dest: /home/pgrewal/Project-Ansible//files/{{ ansible_hostname }}.json
    create: yes
    line: "{{ g_fact | to_nice_json }}"
  delegate_to: localhost

- name: Facts check for hosts
  debug:
    msg: The package to install on {{ ansible_hostname }}.
